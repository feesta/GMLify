<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script src="https://raw.github.com/mrdoob/three.js/master/build/Three.js"></script>
        <!-- <script src="https://raw.github.com/feesta/GMLify/master/gmlify_3drender.js"></script> -->
        <script src="./gmlify_3drender.js"></script>
        <style>
            body {
                background:#eee;
                padding:0;
                margin:0;
                overflow:hidden;
            }
            

        </style>
    </head>

    <body>
        <div id='main'></div>
        
        <script>

$(function(){

    $("<div id='gmlify_loader'>Downloading GML... please wait.</div>").css({
        position:'fixed',
        left:0,
        top:0,
        'font-size':18,
        padding:10,
        'font-family':'Helvetica',
        'font-weight':'bold',
        color:'black',
        'background-color':'white',
        'z-index':999999999999
    }).appendTo("body");

    continuouslyGetJSON();

});

function continuouslyGetJSON() {
    getGMLJSON(function(){
        $("#gmlify_loader").html("Rendering GML.");
        continuouslyRender();
    });
}

function continuouslyRender() {
    renderGML(function(){
        $("#gmlify_loader").html("Downloading GML... please wait.");
        continuouslyGetJSON();
    });
}


        </script>

    </body>
</html>









